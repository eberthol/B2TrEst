# B2TrEst

This package provides a way to estimate the number of hits deposited by a charged track passing through the Central Drift Chamber (CDC) of the Belle II detector.

From the 3-momenta, charged, and production vertex of a given track, the software computes the trajectory of the particle in the magnetic field of the detector. Then, using a simplified version of the CDC, it evaluates the number of CDC hits associated to this track.

# Installation

This package uses comon python librairies suchs as numpy, pandas, scipy and matplotlib.

# Usage

For a quick start, use the ```simple_example.ipynb``` notebook.

The file ``track_propagation_in_CDC.py`` contains all the classes and methods that are used to compute the trajectory of charged particles and the number of hits in the CDC.

The inputs to configure the different objects are given as dictionaries.

To get the number of CDC hits corresponding to one track, you first need to create a ```CDC()``` object. If an emtpy dictionary is provided, the model model used by default is based on the description given in the BelleII TDR. It is also possible to customize this model by changing the parameters via the input dictionary.

~~~python
cdc = CDC({})
~~~

The trajectory of the track is calculated using the ```Trajectory()``` object. A trajectory is composed of several ```Point()``` objects. The distance between the points is specified via the attibute ```step```. By default, the steps are in arc-length in the (x-y) plane. The ```Trajectory()``` objects contains information about the coordinates of each point, its position in CDC and the number of CDC hits generated by the track. The track propagation is computed using the 3-momentum of the track, production vertex and charge.

~~~python
d_trk1 = {
            'q':  1,            # charge (+1 or -1)
            'px': 1.10,         # x-component of the 3-momentum 
            'py': 0.89,         # y-component of the 3-momentum
            'pz': -0.29,        # z-component of the 3-momentum
            'prodVtxX': 4.39,   # x-component of the production vertex
            'prodVtxY': 3.21,   # y-component of the production vertex
            'prodVtxZ': -1.27,  # z-component of the production vertex
        }
trk1 = Trajectory(d_trk1, cdc, step=0.1)  
nCDCHits = trk1.CDChits
~~~

It is also possible to make some plots of the tracks, see the examples in ```simple_example.ipynb```.
